# Описание деталей имплементации

## Вопросы

1. "остаётся на усмотрение студента" это значить можно не реализовывать?
2. "Хендлер доступен только авторизованному пользователю" значит что у пользователя должны быть права только на свои заказы?
3. 

## Сервисы

* auth
* api (router)
* orders

### Auth

Задачи:

* регистрация
* аутентификация
* авторизация (валидация статуса?)

Хендлеры:

* `POST /api/user/register` — регистрация пользователя;
* `POST /api/user/login` — аутентификация пользователя;

### Orders

Задачи:

* приём номеров заказов от зарегистрированных пользователей (?что такое прием номеров, для чего?)
* учёт и ведение списка переданных номеров заказов зарегистрированного пользователя;
* учёт и ведение накопительного счёта зарегистрированного пользователя;
* проверка принятых номеров заказов через систему расчёта баллов лояльности;
* начисление за каждый подходящий номер заказа положенного вознаграждения на счёт лояльности пользователя.

Хендлеры:

* `POST /api/user/orders` — загрузка пользователем номера заказа для расчёта;
* `GET /api/user/orders` — получение списка загруженных пользователем номеров заказов, статусов их обработки и информации о начислениях;
* `GET /api/user/balance` — получение текущего баланса счёта баллов лояльности пользователя;
* `POST /api/user/balance/withdraw` — запрос на списание баллов с накопительного счёта в счёт оплаты нового заказа;
* `GET /api/user/withdrawals` — получение информации о выводе средств с накопительного счёта пользователем.

## База данных

Таблицы:

* users
* groups
* orders

Таблица users:

* id
* login
* password_hash
* group_id

Если авторизация, то:

Таблица groups:

* id
* name
